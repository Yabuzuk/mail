<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Форма отправки данных о грузоперевозках</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');/* Цвета Telegram */

 :root {
  --tg-blue: #0088cc; /* Основной синий цвет Telegram */
  --tg-background: #f7f7f7; /* Фоновый цвет чата */
  --tg-message-in: #e5e5ea; /* Фон входящих сообщений */
  --tg-message-out: #d2f4ff; /* Фон исходящих сообщений */
}

body {
  background-color: var(--tg-background);
  font-family: 'Roboto', sans-serif;
  font-weight: 300;
  color: #000; /* Черный текст */
  margin: 0;
  padding: 20px;
  max-width: 340px; /* Максимальная ширина */
  margin-left: auto;
  margin-right: auto;
  border: none;
  
}

form {
  background-color: #fff;
  font-family: 'Roboto', sans-serif;
  font-weight: 300;
  padding: 20px;

  border-radius: 5px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  margin-bottom: 10px;
  border: 1px solid #dfe6e9;
  width: 340;
}

input, textarea, button, select {
  font-family: 'Roboto', sans-serif;
  font-weight: 300;
  margin-bottom: 10px;
  border-radius: 5px;
  border: 1px solid #dfe6e9;
  padding: 7px; /* Уменьшено с 15px до 9px */
  width: calc(100% - 18px); /* Уменьшено пропорционально новому padding */
  box-sizing: border-box;
  width: 100%; /* Ширина элементов теперь 100% от формы */
}

@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

button {
  background-color: var(--tg-blue);
  color: white;
  font-weight: bold;
  border: none;
  cursor: pointer;
  width: 100%;
}

button:hover {
  background-color: #0099e6; /* Светлый оттенок синего */
}

.message {
  
  border: 1px solid var(--tg-blue);
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 5px;
  cursor: pointer;
  backdrop-filter: blur(10px); /* Размытие фона */
  -webkit-backdrop-filter: blur(10px); /* Для поддержки в Safari */
  border: 1px solid rgba(55, 55, 55, 0.2); /* Светлая граница для эффекта стекла */
  
}


.message.active .message-content {
  display: block;
}

.message-content {
  display: none; /* Скрыть содержимое по умолчанию */
  padding: 10px;
  border-top: 1px solid var(--tg-blue);
  background-color: var(--tg-message-in);
  background-color: rgba(49, 49, 49, 0,1); border-radius: 5px; /* Полупрозрачный белый фон */
  
  
}

.message-preview {
  padding: 10px;
  background-color: var(--tg-message-in);
  border-bottom: 1px solid var(--tg-blue);
  background-color: rgba(49, 49, 49, 0,1); border-radius: 5px; /* Полупрозрачный белый фон */

}

.modal {
  display: none; /* Скрыть модальное окно по умолчанию */
  position: fixed; /* Фиксированное позиционирование */
  z-index: 1; /* Поверх всего */
  left: 0;
  top: 0;
  width: 100%; /* Полная ширина */
  height: 100%; /* Полная высота */
  overflow: auto; /* Включить прокрутку, если нужно */
  background-color: rgba(0,0,0,0.4); /* Цвет фона с прозрачностью */
  padding-top: 60px;
  
}

.modal-content {
  background-color: #fefefe00;
  margin: 2% auto; /* 5% от верха и по центру */
  padding: 20px;
  border: 1px solid #88888800;
  width: 340px; /* Ширина содержимого */
}

.close {
  color: #aaa;
  position: absolute; /* Абсолютное позиционирование */
  top: -10px; /* Смещение вверх относительно границы модального окна */
  right: -10px; /* Смещение вправо относительно границы модального окна */
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

/* Стили для кнопок ролей */
.role-buttons {
      display: flex; /* Размещаем кнопки в ряд */
      justify-content: space-between; /* Равномерное распределение */
      margin-bottom: 20px; /* Отступ снизу */
      padding: 7.5px; /* Уменьшаем padding в два раза */
      font-size: 0.8em; /* Уменьшаем размер шрифта */
    }

    .role-button {
      flex: 1; /* Кнопки занимают доступное пространство */
      margin-right: 5px; /* Отступ справа */
      background-color: var(--tg-blue); /* Цвет фона */
      color: white; /* Цвет текста */
      padding: 7.5px; /* Уменьшаем padding в два раза */
      font-size: 0.8em; /* Уменьшаем размер шрифта */
    }

    .role-button:last-child {
      margin-right: 0; /* У последней кнопки отступ справа не нужен */
    }

    .role-button.active {
      background-color: #006699; /* Более темный цвет для активной кнопки */
    }
  </style>
</head>
<body>

  
  <!-- Кнопка для открытия всплывающего окна -->
  <button id="myBtn">+ Добавить заказ</button>

  <!-- Всплывающее окно -->
  <div id="myModal" class="modal">
    <!-- Содержимое всплывающего окна -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <!-- Форма -->
      <form id="myForm" action="/additem" method="post">
        <!-- Скрытое поле для хранения значения роли -->
        <input type="hidden" id="roleInput" name="role">
 
        <!-- Контейнер для кнопок ролей -->
        <div class="role-buttons">
          <!-- Кнопки для выбора роли -->
          <button type="button" class="role-button" onclick="setRole('Отправлю', this)">Отправить</button>
          <button type="button" class="role-button" onclick="setRole('Увезу', this)">Увезти</button>
        </div>
 
        <!-- Остальные поля формы -->
        <input type="text" name="from" placeholder="Откуда" required>
        <input type="text" name="to" placeholder="Куда" required>
        <input type="date" name="date" required>
        <input type="number" name="price" placeholder="Цена" required>
        <input type="number" name="weight" placeholder="Вес" required>
        <input type="text" name="contact" placeholder="Контакт" required>
        <textarea name="message" placeholder="Сообщение"></textarea>
        <button type="submit">Отправить</button>
      </form>
    </div>
  </div>

  <!-- Контейнер для отображения данных в виде сообщений -->
  <div id="itemsContainer"></div>

  <script>
 document.addEventListener('DOMContentLoaded', function() {
  fetch('/api/items')
    .then(response => response.json())
    .then(items => {
      const itemsContainer = document.getElementById('itemsContainer');
      items.forEach(item => {
        let message = document.createElement('div');
        message.classList.add('message');
        message.addEventListener('click', function() {
          this.classList.toggle('active');
        });

        let messagePreview = document.createElement('div');
        messagePreview.classList.add('message-preview');
        messagePreview.textContent = `${item.role} из ${item.from} в ${item.to}`;

        let messageContent = document.createElement('div');
        messageContent.classList.add('message-content');
        messageContent.innerHTML = `
          <p>Дата: <span>${new Date(item.date).toLocaleDateString()}</span></p>
          <p>Цена: <span>${item.price}</span> Вес: <span>${item.weight}</span></p>
          <p>Контакт: <span>${item.contact}</span></p>
          <p>Сообщение: <span>${item.message}</span></p>
        `;

        message.appendChild(messagePreview);
        message.appendChild(messageContent);

        // Используем insertBefore для добавления нового сообщения в начало контейнера
        if (itemsContainer.firstChild) {
          itemsContainer.insertBefore(message, itemsContainer.firstChild);
        } else {
          itemsContainer.appendChild(message);
        }
      });
    })
    .catch(error => console.error('Ошибка:', error));
});
    // Скрипт для управления всплывающим окном
    var modal = document.getElementById('myModal');
    var btn = document.getElementById('myBtn');
    var span = document.getElementsByClassName('close')[0];

    btn.onclick = function() {
      modal.style.display = "block";
    }

    span.onclick = function() {
      modal.style.display = "none";
    }

    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }

    // JavaScript для управления каруселью
    let slideIndex = 0;
    showSlides(slideIndex);

    // Добавляем функцию showSlides
    function showSlides() {
      let slides = document.querySelectorAll('.carousel-images img');
      for (let i = 0; i < slides.length; i++) {
        slides[i].style.display = 'none';  
      }
      slideIndex++;
      if (slideIndex > slides.length) {slideIndex = 1}    
      slides[slideIndex-1].style.display = 'block';
      // Смена слайда каждые 5 секунд
      setTimeout(showSlides, 5000);
    }

    // Функция moveSlide изменена для совместимости с showSlides
    function moveSlide(step) {
      slideIndex += step - 1;
      if (slideIndex < 0) {slideIndex = slides.length - 1}
      if (slideIndex >= slides.length) {slideIndex = 0}
      showSlides();
    }

    // Обновленная функция для установки роли и изменения стиля кнопок
    function setRole(role, element) {
      // Сброс стилей для всех кнопок
      document.querySelectorAll('.role-button').forEach(function(button) {
        button.classList.remove('active');
      });
      // Установка активного стиля для выбранной кнопки
      element.classList.add('active');
      // Установка значения роли
      document.getElementById('roleInput').value = role;
    }
  </script>

</body>
</html>
